@{
    ViewBag.Title = "Register";
    Layout = "~/Views/Shared/_BouffageLayout.cshtml";
}
@*
    <h2>@ViewBag.Title.</h2>

    @using (Html.BeginForm("Register", "Account", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
    {
        @Html.AntiForgeryToken()
        <h4>Create a new account.</h4>
        <hr />
        @Html.ValidationSummary("", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(m => m.Email, new { @class = "col-md-2 control-label" })
            <div class="col-md-10">
                @Html.TextBoxFor(m => m.Email, new { @class = "form-control" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(m => m.Password, new { @class = "col-md-2 control-label" })
            <div class="col-md-10">
                @Html.PasswordFor(m => m.Password, new { @class = "form-control" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(m => m.ConfirmPassword, new { @class = "col-md-2 control-label" })
            <div class="col-md-10">
                @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "form-control" })
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" class="btn btn-default" value="Register" />
            </div>
        </div>
    }
*@


   <main class="main" role="main">
    <!--wrap-->
    <div class="wrap clearfix moveDown">
        <!--row-->
        <div class="row">
            <!--content-->
            <section class="content center full-width wow fadeInUp">
                <div class="modal container"id="registerForm">
                    <h3>Register</h3>
                    <div class="f-row">
                        <input type="text" placeholder="Your name" />
                    </div>
                    <div class="f-row">
                        <input type="email" placeholder="Your email" />
                    </div>
                    <div class="f-row">
                        <input type="password" placeholder="Your password" />
                    </div>
                    <div class="f-row">
                        <input type="password" placeholder="Retype password" />
                    </div>

                    <div class="f-row bwrap">
                        <input type="button" id="registerButton" value="register" />
                    </div>
                    <p>Already have an account yet? <a href="~/account/login">Log in.</a></p>
                </div>
            </section>
            <!--//content-->
        </div>
        <!--//row-->
    </div>
    <!--//wrap-->
</main>
<!--//main-->

<!--//main-->
@section Scripts {

    <script>

        new WOW().init();


        bouffage.page.startUp = function () {

            $('#registerButton').on('click', bouffage.page.handlers.saveRegButtonInfo);

       //     bouffage.page.validationRules();
        }

        bouffage.page.handlers.saveRegButtonInfo = function () {

            //var myformisvalid = $('#registerform').valid();

            //if (myformisvalid) {

            var saveLoginButton = $('#registerForm').serialize();

            bouffage.page.saveRegisterInfo(saveLoginButton);
        };
      //  };

        bouffage.page.saveRegisterInfo = function (myData) {

            var url = "/api/users/register";

            var settings = {
                cache: false
                    , contentType: "application/x-www-form-urlencoded; charset=UTF-8"
                    , data: myData
                    , dataType: "json"
                    , success: bouffage.page.ajaxSuccess
                    , error: bouffage.page.ajaxError
                    , type: "POST"
            };

            $.ajax(url, settings);

        }

        bouffage.page.ajaxSuccess = function (data, status, xhr) {

            window.location.href = "/users/info";

        }

        bouffage.page.ajaxError = function (jqXHR, msg, textStatus) {

            bouffage.utils.errorMessageExposer(jqXHR, textStatus);

        }

        //bouffage.page.validationRules = function () {

        //    bouffage.page.validator = $('#registerForm').validate({
        //        debug: true,
        //        rules: {
        //            "name": {
        //                required: true,
        //                email: true
        //            }
        //            , "email": {
        //                required: true,
        //                email: true
        //            }
        //             , "password": {
        //                required: true,
        //                pattern: '^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*(_|[^\\w])).+$',
        //                minlength: 6,
        //            }
        //            , "confirm": {
        //                required: true,
        //                equalTo: "#password"
        //            }
        //        }
        //    }
        //    );
        //}

    </script>
}
